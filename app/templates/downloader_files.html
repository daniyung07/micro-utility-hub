<!--downloader_files.html-->

{% extends "base.html" %}

{% block title %}My Downloads{% endblock %}

{% block content %}
    <section class="downloads-container">
        <h1>My Downloaded Files</h1>
        <p>This list shows all videos you have successfully downloaded and saved to the server.</p>
        <hr>

        {% if files %}
            <table class="tasks-table" style="width: 100%;">
                <caption>Your saved video files</caption>
                <thead>
                    <tr>
                        <th style="width: 50%;">Filename</th>
                        <th style="width: 15%; text-align: center;">File Size</th>
                        <th style="width: 35%; text-align: center;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                {% for file in files %}
                    <tr>
                        <td data-label="Filename" style="word-break: break-all;">
                            {{ file.name }}
                        </td>
                        <td data-label="File Size" style="text-align: center;">
                            {{ file.size_mb }} MB
                        </td>
                        <td data-label="Actions" style="text-align: center;">
                            <a href="{{ url_for('downloader.get_file', filename=file.name) }}" class="btn btn-secondary" style="width: auto; padding: 5px 10px; font-size: 0.9em; margin-right: 5px;">Download</a>

                            <form action="{{ url_for('downloader.delete_file', filename=file.name) }}" method="POST" style="display: inline;">
                                <button type="submit"
                                        onclick="return confirm('Are you sure you want to permanently delete \'{{ file.name }}\'?')"
                                        class="delete-btn">
                                    Delete
                                </button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="no-tasks" style="text-align: center; margin-top: 30px;">You have no downloaded files saved on the server.</p>
        {% endif %}

        <p style="margin-top: 30px;">
            <a href="{{ url_for('downloader.download') }}" class="btn btn-primary" style="width: auto;">&larr; Back to Downloader</a>
        </p>
    </section>
{% endblock %}